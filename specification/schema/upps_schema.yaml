---
# Unified Personality Profile Standard (UPPS) Schema Definition
# Version: 2025 v1.0.0

$schema: "http://json-schema.org/draft-07/schema#"
title: "UPPS Profile"
description: "Schema for validating UPPS (Unified Personality Profile Standard) profiles"
type: object
required:
  - personal_info
  - background
  - personality

properties:
  # 基本個人情報
  personal_info:
    type: object
    description: "基本的な個人情報"
    required:
      - name
    properties:
      name:
        type: string
        description: "氏名"
      age:
        type: integer
        description: "年齢"
        minimum: 0
        maximum: 150
      gender:
        type: string
        description: "性別"
      occupation:
        type: string
        description: "職業"
      cultural_background:
        type: string
        description: "文化的背景"
    additionalProperties: true

  # 背景情報
  background:
    type: string
    description: "成育歴、生活背景の自由記述"
    minLength: 1

  # 性格特性
  personality:
    type: object
    description: "性格特性の定義"
    required:
      - traits
    properties:
      model:
        type: string
        description: "使用する性格特性モデル"
        default: "BigFive"
        enum:
          - "BigFive"
          - "HEXACO"
          - "Custom"
      traits:
        type: object
        description: "性格特性のスコア値"
        additionalProperties: false
        properties:
          openness:
            type: number
            description: "開放性 - 新しい経験や概念への受容性"
            minimum: 0.0
            maximum: 1.0
          conscientiousness:
            type: number
            description: "誠実性 - 計画性や責任感"
            minimum: 0.0
            maximum: 1.0
          extraversion:
            type: number
            description: "外向性 - 社交性やエネルギーの外向的発散"
            minimum: 0.0
            maximum: 1.0
          agreeableness:
            type: number
            description: "協調性 - 他者への思いやりや協力"
            minimum: 0.0
            maximum: 1.0
          neuroticism:
            type: number
            description: "神経症的傾向 - 感情の不安定さやストレス反応"
            minimum: 0.0
            maximum: 1.0
        required:
          - openness
          - conscientiousness
          - extraversion
          - agreeableness
          - neuroticism

  # 価値観
  values:
    type: array
    description: "重視する価値観"
    items:
      type: string
    uniqueItems: true

  # 好きなもの
  likes:
    type: array
    description: "好きなもの"
    items:
      type: string
    uniqueItems: true

  # 嫌いなもの
  dislikes:
    type: array
    description: "嫌いなもの"
    items:
      type: string
    uniqueItems: true

  # 抱える課題
  challenges:
    type: array
    description: "抱える課題"
    items:
      type: string
    uniqueItems: true

  # 目指す目標
  goals:
    type: array
    description: "目指す目標"
    items:
      type: string
    uniqueItems: true

  # コミュニケーションスタイル
  communication_style:
    type: string
    description: "話し方、態度"

  # 認知プロファイル
  cognitive_profile:
    type: object
    description: "知的能力、発達特性"
    properties:
      test_results:
        type: array
        description: "検査結果のリスト"
        items:
          type: object
          required:
            - test_name
            - scores
          properties:
            test_name:
              type: string
              description: "検査名"
            scores:
              type: object
              description: "検査スコア"
              additionalProperties:
                type: number
            description:
              type: string
              description: "検査結果の説明"
      narrative:
        type: string
        description: "認知特性の総合的な説明"

  # 感情記憶
  memory_trace:
    type: object
    description: "感情記憶とトリガー"
    properties:
      memories:
        type: array
        description: "記憶のリスト"
        items:
          type: object
          required:
            - period
            - event
            - emotions
            - triggers
          properties:
            period:
              type: string
              description: "いつの記憶か（時期）"
            event:
              type: string
              description: "何があったか（出来事）"
            emotions:
              type: array
              description: "どう感じたか（感情のリスト）"
              items:
                type: string
              minItems: 1
            triggers:
              type: array
              description: "何によって思い出すか（想起トリガー）"
              items:
                type: string
              minItems: 1

  # セッション文脈
  session_context:
    type: object
    description: "セッション背景設定"
    required:
      - setting
      - purpose
      - background
    properties:
      setting:
        type: string
        description: "場所や状況（例: 精神科外来）"
      purpose:
        type: string
        description: "対話の目的（例: 不眠相談）"
      background:
        type: string
        description: "背景情報（例: 症状の悪化）"

  # 状態
  state:
    type: object
    description: "現在の感情状態（0-100の範囲）"
    additionalProperties:
      type: integer
      minimum: 0
      maximum: 100
    minProperties: 1

# 追加のプロパティは許可しない
additionalProperties: false
